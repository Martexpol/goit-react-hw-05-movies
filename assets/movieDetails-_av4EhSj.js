import{d as b,u as k,r as a,a as S,b as D,j as e,f as v,O as C,c as B}from"./index-lHYLsiy8.js";const H="_movieContainer_6au0w_1",y="_movieDetailsSection_6au0w_13",L="_imgContainer_6au0w_21",E="_movieDescription_6au0w_27",G="_movieHeader_6au0w_34",F="_movieSubHeader_6au0w_38",M="_goBackBtn_6au0w_42",O="_link_6au0w_55",s={movieContainer:H,movieDetailsSection:y,imgContainer:L,movieDescription:E,movieHeader:G,movieSubHeader:F,goBackBtn:M,link:O};function I(){const{movieId:r}=b(),{movies:d}=k(),[i,u]=a.useState(null),[c,h]=a.useState([]),[x,g]=a.useState([]),p=S(),j=D();if(a.useEffect(()=>{const t=d.find(o=>o.id===parseInt(r));t&&u(t)},[r,d]),a.useEffect(()=>{async function t(){const o="https://api.themoviedb.org/3/genre/movie/list?language=en&api_key=d45c591dd3ef2fb9c22b9964b5ee2547";try{const n=await B.get(o);h(n.data.genres)}catch(n){console.error("Wystąpił błąd podczas pobierania listy gatunków:",n)}}t()},[]),a.useEffect(()=>{if(c.length>0&&i.genres){const t=i.genres.map(o=>{const n=c.find(N=>N.id===o);return n?n.name:"Unknown"});g(t)}},[c,i]),!i)return e.jsx("div",{children:"Loading..."});const _=`https://image.tmdb.org/t/p/w185${i.posterPath}`,f=parseFloat((i.score*10).toFixed(1)),l=i.releaseDate,w=new Date(l);let m;return l===0||l===""?m="tbc":m=w.getFullYear(),e.jsxs("div",{className:s.movieContainer,children:[e.jsxs("div",{children:[" ",e.jsx("button",{onClick:()=>p(-1),className:s.goBackBtn,children:"Go Back"})]}),e.jsxs("div",{className:s.movieDetailsSection,children:[e.jsx("div",{className:s.imgContainer,children:e.jsx("img",{src:_,alt:"photo",width:"185px"})}),e.jsxs("div",{className:s.movieDescription,children:[e.jsxs("h2",{className:s.movieHeader,children:[i.title," (",m,")"]}),e.jsxs("span",{children:["User score: ",f,"%"]}),e.jsx("h4",{className:s.movieSubHeader,children:"Overview"}),e.jsx("span",{children:i.overview}),e.jsx("h4",{className:s.movieSubHeader,children:"Genres"}),e.jsx("span",{children:x.join(", ")})]})]}),e.jsxs("div",{className:s.movieDetailsSection,children:["Additional information:",e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(v,{to:"cast",className:s.link,children:"Cast"})}),e.jsx("li",{children:e.jsx(v,{to:`/movies/${r}/reviews`,state:{from:j},className:s.link,children:"Reviews"})})]})]}),e.jsx("div",{className:s.movieDetailsSection,children:e.jsx(C,{})})]})}export{I as default};
